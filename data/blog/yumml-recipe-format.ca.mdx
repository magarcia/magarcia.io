---
title: YumML - Una Altra Metadades de Receptes
date: '2020-01-06'
spoiler: Hi ha alguns formats de receptes a internet però són antics, no
  estan especificats correctament o tenen restriccions de llicència. YumML és un esforç per fer receptes de cuina
  llegibles per humans i màquines.
draft: true
tags:
  - Spec
  - Recipe
  - Cooking
  - YumML
---

Fa algun temps, parlant amb un amic ens vam adonar que no hi ha un format "estàndard"
per guardar receptes de cuina. En aquell moment estava aprenent React i un dels
primers projectes que vaig intentar fer va ser una app de gestió de receptes. No vaig tenir èxit en
aquell projecte (com molts altres que vaig començar i mai vaig acabar) però en el camí
vaig trobar un esborrany d'especificació d'un format de receptes: **YumML**.

Aquest format va ser publicat en aquell moment a [vikingco.de](http://vikingco.de/) però
el lloc ja no està disponible. Les úniques referències disponibles són de l'
[Internet Archive](https://web.archive.org/web/20160730232450/http://vikingco.de/)
i el [repositori de la pàgina](https://github.com/vikingcode/vikingcode.github.io)
que encara està disponible.

> Les paraules clau “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
> “SHOULD NOT”, “RECOMMENDED”, “MAY”, i “OPTIONAL” en aquest document han de ser
> interpretades com es descriu a [RFC 2119](https://tools.ietf.org/html/rfc2119).

## Història

El primer esborrany del format YumML és del 21 de setembre de 2011 fet per Paul
Jenkins, pots revisar l'[especificació original aquí](./original-yumml.md)
que vaig rescatar dels vells arxius que vaig trobar.

Des del meu punt de vista, aquest esborrany és realment prometedor com un format per a receptes de
cuina, així que vull recuperar-lo dels arxius oblidats d'Internet i portar-lo
a la vida de nou, afegint algunes funcionalitats/especificacions extra.

## Motivació

Com l'autor original de YumML va mencionar en el seu post de blog original, he estat
investigant una mica sobre formats de receptes per a cuina i sent clar, la majoria d'
ells fan pena. El panorama de formats d'intercanvi de receptes està bastant fragmentat, però
la majoria d'ells tenen una cosa en comú: no són realment amigables per als humans.

Molt programari relacionat amb la cuina ve amb un format que usualment només aquest
programari és capaç de treballar amb i entendre. Encara que alguns d'ells poden ser
importats per altres programes.
[Meal-Master](http://web.archive.org/web/20151029032924/http://episoft.home.comcast.net:80/~episoft/)
és un d'aquests formats àmpliament suportats i a causa d'això hi ha una
[enorme col·lecció de receptes](http://www.ffts.com/recipes.htm) disponible online.

Però mirant un exemple, no sembla alguna cosa ben especificada:

```txt
MMMMM----- Now You're Cooking! v5.65 [Meal-Master Export Format]

      Title: Agua De Valencia
 Categories: beverages, spanish
      Yield: 4 servings

      1    bottle of spanish cava
           -(sparkling wine or; champag
           plenty fresh orange juice
           cointreau
           ice cubes

Put some ice cubes into a large jug and pour over lots of orange juice. Now
add the bottle of cava. Once the fizz subsides, stir in a good dash of the
cointreau and it's ready to serve.

  Contributor:  Esther Pérez Solsona

  NYC Nutrilink: N0^00000,N0^00000,N0^00000,N0^00000
```

Hi ha alguns altres formats "famosos" com:

- [RecipeML](http://www.formatdata.com/recipeml/index.html)
- [Recipe Exchange Markup Language](http://reml.sourceforge.net/)
- [CookML](http://www.kalorio.de/index.php?Mod=Ac&Cap=CE&SCa=../cml/CookML_EN)

Però són principalment formats basats en XML i és impossible per a un humà real ser
capaç de llegir i entendre una recepta escrita en aquest format. Si estàs
interessat a trobar altres formats de receptes hi ha una
[llista de formats de cuina relacionats amb programari](http://microformats.org/wiki/recipe-formats).

Val la pena mencionar alguns formats que van venir amb l'era d'Internet. Les microdades HTML
com [Google rich snippets](https://developers.google.com/search/docs/data-types/recipe)
i les [microdades de schema.org](http://schema.org/Recipe), són àmpliament utilitzats per
llocs de receptes comercials. Encara que l'objectiu principal de les microdades és fer el
contingut llegible per màquina (especialment per a propòsits de SEO), però les receptes avui dia estan
pensades per ser llegides i executades per un humà.

Finalment vaig trobar [pesto](https://6xq.net/pesto/) que apunta a fer un format més
simple llegible per humans, però personalment trobo difícil d'entendre
per a algú que no està acostumat a la sintaxi.

## Consideracions de disseny originals

L'autor original de YumML tenia algunes consideracions en ment durant el disseny
del format:

- No necessita una guia de referència llarga.
- Pot ser fàcilment llegit per persones no tècniques en el format "cru".
- Pot ser traduïble entre imperial i mètric.
- Vol alguna cosa com el _markdown_ de receptes (però encara fàcil d'analitzar amb programari).

YumML està basat en YAML per crear un format llegible per humans _i_ sistemes.

**De [yaml.org](https://yaml.org/)**

> Què És: YAML és un estàndard de serialització de dades amigable per a humans per a tots els
> llenguatges de programació.

## Objectius

Des del meu costat vull definir uns objectius més formals per a l'especificació.

Format YumML:

- **HA DE** ser llegible per humans **i** sistemes.
- **HA DE** ser autocontingut, així que **NO HA DE** requerir recursos addicionals per ser interpretat.
- **HA DE** tenir suport per a diferents sistemes mètrics _(mètric, imperial)_.
- **HAURIA** de ser fàcil de traduir a diferents idiomes _(les receptes tenen una forta influència cultural i l'idioma no hauria de ser una barrera per a algú que vol entendre)_.
- **HAURIA** de ser fàcil d'analitzar utilitzant eines ja existents.
- **HAURIA** de ser fàcil d'estendre en el futur.

## Exemple Bàsic

```yumml
name: Mrs Fields Choc-Chip Cookies
date: 2011-09-21
time: 25 minutes
ingredients:
  - quantity: 2.5
    unit: cups
    item: plain flour

  - quantity: 0.5
    unit: tsp
    item: bi-carb of soda

instructions:
  - step: Mix flour, bi-carb soda, and salt in a large bowl
  - step: Blend sugars with electric mixer, add margarine to form a grainy paste
```

## Especificació

Hi ha tres seccions principals que cada recepta ha d'incloure: la capçalera, la llista d'ingredients, i les instruccions.

### Capçalera

La capçalera és una secció implícita on tots els atributs es col·loquen en el
nivell arrel de l'arxiu. Tots els atributs haurien de col·locar-se a la part superior de l'
arxiu.

- **name**:
  - descripció: `Nom de la recepta.`
  - tipus: `string`
  - requerit: `true`
- `date`:
  - descripció: Data de la recepta.
  - tipus: `string` (notació de data completa com es defineix per [RFC 3339, secció 5.6](https://tools.ietf.org/html/rfc3339#section-5.6), per exemple, _2017-07-21_)
  - requerit: false
- `time`: (_opcional_) Quant de temps prendria la recepta.
- `author`: (_opcional_) Autor de la recepta.
- `servings`: (_opcional_) Per a quantes porcions està dimensionada la recepta (ex: una
  sopa de tomàquet amb 4 porcions significa que és per a 4 persones, però galetes de xocolata amb
  20 porcions significa que va a fer 20 galetes).
- `description`: (_opcional_) Una descripció més detallada sobre la recepta.
- `rating`: (_opcional_) Qualificació de la recepta.

#### Exemple

```yumml:1-8
name: Mrs Fields Choc-Chip Cookies
date: 2011-09-21
time: 25 minutes
serves: 1
makes: 25
tags:
  - cookies
  - chocolate
ingredients:
  - quantity: 2.5
    unit: cups
    item: plain flour

  - quantity: 0.5
    unit: tsp
    item: bi-carb of soda

instructions:
  - step: Mix flour, bi-carb soda, and salt in a large bowl
  - step: Blend sugars with electric mixer, add margarine to form a grainy paste
```
