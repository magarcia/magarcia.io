---
title: Comprovar undefined en JavaScript
date: "2020-05-03"
spoiler:
  Una cosa que tothom que ha estat treballant amb JavaScript durant un temps ha
  fet és comprovar si una variable és undefined. En aquest article, explico
  quines són les diferents maneres que pots utilitzar per a això i les
  diferències entre elles.
tags:
  - javascript
---

Si escrius JavaScript regularment, probablement has necessitat comprovar si una
variable és `undefined`.

Però, quina és la millor manera de fer-ho?

## La manera intuïtiva

Qualsevol programador amb experiència en altres llenguatges intuirà:

```js
if (x === undefined) { ... }
```

Això funciona sense problemes--gairebé.

La comparació directa amb `undefined` funciona en tots els navegadors moderns.
Els navegadors antics, però, permetien la reassignació:

```js
undefined = "new value";
```

Amb aquesta reassignació, la comparació directa falla.

[ECMAScript 5](https://es5.github.io/#x15.1.1.3) va arreglar això el 2009:

> **15.1.1.3 undefined**  
> El valor de `undefined` és **undefined** (veure 8.1). Aquesta propietat té els
> atributs
> `{ [[Writable]]: false, [[Enumerable]]: false, [[Configurable]]: false }`.

## La manera "segura"

Si suportes navegadors antics i et preocupa la reassignació de `undefined`,
utilitza mètodes alternatius.

### Llegint el tipus

L'[operador typeof](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof)
retorna `"undefined"` per a valors undefined:

```js
if (typeof x === "undefined") { ... }
```

**Nota:** `typeof` no llança error per a variables no declarades.

### Utilitzant `void`

L'[operador void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
també retorna undefined:

```js
if (x === void(0)) { ... }
```

El zero no té significat especial. Com indica MDN:

> L'**operador void** avalua l'_expressió_ donada i després retorna
> [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined).

## Quina manera és millor

Com a consultor, vaig aprendre la millor resposta: depèn. Aquí van alguns
consells.

Segueix les convencions existents del codi base. Per a codi nou només en
navegadors moderns, utilitza comparació directa--és clara i llegible fins i tot
per a principiants en JavaScript. Per a suportar navegadors antics, crea una
funció `isUndefined` amb el teu mètode preferit dins. Això expressa la intenció
clarament.
